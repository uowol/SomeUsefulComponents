한국사람들이 파이썬 라이브러리를 설치하다보면 한 번씩 마주칠 수 있는 문제이다.

command 창에 `pip install <library>` 명령어를 입력하면 서버에서 해당 라이브러리를 다운받고 설치를 진행한다. 그러나 대부분의 외국에서 utf-8을 쓰는 것과 달리 기본 encoding이 cp949로 되어 있는 환경에서는 가끔 아래와 같은 오류 로그를 볼 수 있다.
```python
      'cp949' codec can't decode byte 0xf0 in position 1324 ...
```
이 경우에 해결할 수 있는 방법으로는 대표적으로 아래 두 방법이 소개되어 있다. 흔하게 나오는 방법이므로 아마 이 글을 보는 사람들은 이 두 방법으로 해결이 되지 않아 여기까지 찾아왔을 것이라고 생각한다.

1. 파이썬설치경로\Lib\distutils\text_file.py 수정하기
   
   - 115번째 줄의 `io.open()`에 `encoding='utf-8'`을 추가한다.

2. 파이썬설치경로\Lib\configparser.py 수정하기
   
   - 695번째 줄의 `with open() as fp`에 `encoding='utf-8'`을 추가한다.

그러나 나의 경우엔 위 두가지 방법으로 해결이 되지 않았다.

하여 찾아낸 세번째 방법은 다음과 같다.

3. 설치 파일을 직접 다운받고 encoding을 수정하여 수동 설치하기
   
   - 먼저 로그를 살펴보고 문제가 발생하는 라이브러리를 찾는다. 다운받으려 하는 라이브러리가 아니라 필요로 하여 먼저 설치하는 라이브러리 중에 문제를 일으키는 경우가 잦다. 보통 필요로 하는 라이브러리에 대한 정보는 `requirements.txt`에 저장되어 있다.
     ex) `blip-ci_0.0.2.tar`를 설치하는 중에 문제가 발생하였다면 버전과 확장자에 대한 정보를 제외한 `blip-ci`를 기억해두자.
   
   - `pip`를 사용하여 설치하는 경우 https://pypi.org/ 링크에 들어가 앞에서 찾은 라이브러리의 이름을 적고 검색한다.
      ![스크린샷_20230221_052235](https://user-images.githubusercontent.com/20416616/220291001-69a6379b-e165-4cce-8eb7-bd3f846363ee.png)

   
   - 나타난 결과 리스트에서 문제가 되는 라이브러리를 찾아 클릭한다.
   ![스크린샷_20230221_052331](https://user-images.githubusercontent.com/20416616/220291043-37c909fc-12e2-4f0d-bc99-435ca6f15f6f.png)

   - 해당 라이브러리에 대한 문서가 나타나면 왼쪽에 download files 버튼을 클릭하여 설치 파일을 다운로드한다.
   ![스크린샷_20230221_052418](https://user-images.githubusercontent.com/20416616/220291059-5e12aae2-fba5-4ab0-8765-14ac096ed068.png)

   - 다운로드한 파일의 압축을 풀고 `setup.py` 파일을 열고 보이는 모든 `open()`함수의 encoding을 utf-8로 바꾸거나 새로 추가해준다.
   
   - 이 방법으로 해결이 되지 않았다면 다시 발생했던 오류의 로그를 보고 어떤 파일의 몇번째 줄에서 오류가 발생했는지를 확인하고 앞서 압축을 해제한 설치 파일에서 해당 파일을 찾고 수정한다. 마찬가지로 `open()` 함수에 인코딩을 추가하거나 변경해준다.
   
   - 끝으로 `setup.py`가 있는 폴더의 최상단으로 돌아와 커맨드 창(윈도우의 경우 cmd)을 열고 `python setup.py install`을 입력하여 수동 설치를 진행한다.

나의 경우엔 이 방법으로 해결이 되었다. 오류 로그를 하나씩 뜯어보면서 많은 고통을 받았고 다시는 같은 이유로 시간을 버리고 싶지 않아 이렇게 정리해보았다.


